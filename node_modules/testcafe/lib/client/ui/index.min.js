!function S(D){var U=D.document;!function(l){"use strict";var h,f,s,p,m,a={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return p=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},m=function(t,e,n){var i,s;if("function"==typeof t[e+n])return e+n;for(i=0;s=a[n][i];++i)if("function"==typeof t[e+s])return e+s;return null},h=function(t,e,n,i,s,a){var o,r,l,u,d,c;for("."!==(o=(n=n.split(/[\\/]/)).pop())&&".."!==o||(n.push(o),o="");null!=(r=n.shift());)if(r&&"."!==r&&(".."===r?(t=e.pop(),a=a.slice(0,a.lastIndexOf("/"))):(e.push(t),t=t[r],a+="/"+r),!t))throw p(i);if(o&&"function"!=typeof t[o]&&((c=m(t,o,".js"))||(c=m(t,o,".json")),c||(c=m(t,o,".css")),c||(c=m(t,o,".html")),c?o=c:2!==s&&"object"==typeof t[o]&&(e.push(t),t=t[o],a+="/"+o,o="")),!o)return 1!==s&&t[":mainpath:"]?h(t,e,t[":mainpath:"],i,1,a):h(t,e,"index",i,2,a);if(!(d=t[o]))throw p(i);return d.hasOwnProperty("module")?d.module.exports:(l={},d.module=u={exports:l,id:a+"/"+o},d.call(l,l,u,f(t,e,a)),u.exports)},s=function(t,e,n,i){var s,a=n,o=n.charAt(0),r=0;if("/"===o){if(a=a.slice(1),!(t=l["/"])){if(u)return u(n);throw p(n)}i="/",e=[]}else if("."!==o){if(s=a.split("/",1)[0],!(t=l[s])){if(u)return u(n);throw p(n)}i=s,e=[],(a=a.slice(s.length+1))||(r=(a=t[":mainpath:"])?1:(a="index",2))}return h(t,e,a,n,r,i)},(f=function(e,n,i){return function(t){return s(e,[].concat(n),t,i)}})(l,[],"")}({"testcafe-release":{src:{client:{ui:{cursor:{"iframe-cursor.js":function(t,e,n){t.__esModule=!0;var i=o(n("../deps/hammerhead")),s=n("../deps/testcafe-core"),a=o(n("./messages"));function o(t){return t&&t.__esModule?t:{default:t}}var r=i.default.utils.browser.isIE?1:0;t.default={move:function(t,e){var n={cmd:a.default.moveRequest,x:t+r,y:e+r};return(0,s.sendRequestToFrame)(n,a.default.moveResponse,D.parent)},leftButtonDown:function(){return(0,s.sendRequestToFrame)({cmd:a.default.leftButtonDownRequest},a.default.leftButtonDownResponse,D.parent)},rightButtonDown:function(){return(0,s.sendRequestToFrame)({cmd:a.default.rightButtonDownRequest},a.default.rightButtonDownResponse,D.parent)},buttonUp:function(){return(0,s.sendRequestToFrame)({cmd:a.default.buttonUpRequest},a.default.buttonUpResponse,D.parent)}},e.exports=t.default},"index.js":function(t,e,n){t.__esModule=!0;var i=r(n("./../deps/hammerhead")),s=r(n("./../deps/testcafe-core")),a=r(n("../ui-root")),o=r(n("./messages"));function r(t){return t&&t.__esModule?t:{default:t}}var l=i.default.Promise,u=i.default.shadowUI,d=i.default.utils.browser,c=i.default.utils.featureDetection,h=i.default.eventSandbox.message,f=s.default.styleUtils,p=s.default.positionUtils,m="l-mouse-down",g="r-mouse-down",v=[m,g].join(" ");h.on(h.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message,n=null;switch(e.cmd){case o.default.moveRequest:n=p.getIframePointRelativeToParentFrame({x:e.x,y:e.y},t.source),y.move(n.x,n.y).then(function(){return h.sendServiceMsg({cmd:o.default.moveResponse},t.source)});break;case o.default.leftButtonDownRequest:y.leftButtonDown().then(function(){return h.sendServiceMsg({cmd:o.default.leftButtonDownResponse},t.source)});break;case o.default.rightButtonDownRequest:y.rightButtonDown().then(function(){return h.sendServiceMsg({cmd:o.default.rightButtonDownResponse},t.source)});break;case o.default.buttonUpRequest:y.buttonUp().then(function(){return h.sendServiceMsg({cmd:o.default.buttonUpResponse},t.source)})}});var y={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=U.createElement("div"),u.addClass(this.cursorElement,"cursor"),c.isTouchDevice&&!d.isIE&&(u.addClass(this.cursorElement,"touch"),this.pointerOffsetX=Math.ceil(f.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(f.getHeight(this.cursorElement)/2)),a.default.element().appendChild(this.cursorElement)},isVisible:function(){return this.cursorElement&&"hidden"!==f.get(this.cursorElement,"visibility")},hide:function(){this.cursorElement||this._createElement(),f.set(this.cursorElement,"visibility","hidden")},show:function(){this.cursorElement||this._createElement(),f.set(this.cursorElement,"visibility","")},move:function(t,e){return this.x=t,this.y=e,this.cursorElement||this._createElement(),f.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"}),l.resolve()},leftButtonDown:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),u.addClass(this.cursorElement,m),l.resolve()},rightButtonDown:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),u.addClass(this.cursorElement,g),l.resolve()},buttonUp:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),l.resolve()}};t.default=y,e.exports=t.default},"messages.js":function(t,e,n){t.__esModule=!0,t.default={moveRequest:"ui|cursor|move|request",leftButtonDownRequest:"ui|cursor|leftbuttondown|request",rightButtonDownRequest:"ui|cursor|rightbuttondown|request",buttonUpRequest:"ui|cursor|buttonup|request",moveResponse:"ui|cursor|move|response",leftButtonDownResponse:"ui|cursor|leftbuttondown|response",rightButtonDownResponse:"ui|cursor|rightbuttondown|response",buttonUpResponse:"ui|cursor|buttonup|response"},e.exports=t.default}},deps:{"hammerhead.js":function(t,e,n){t.__esModule=!0,t.default=D["%hammerhead%"],e.exports=t.default},"testcafe-core.js":function(t,e,n){t.__esModule=!0,t.default=D["%testCafeCore%"],e.exports=t.default}},"index.js":function(t,e,n){var i=m(n("./deps/hammerhead")),s=m(n("./deps/testcafe-core")),a=p(n("./select-element")),o=p(n("./modal-background")),r=m(n("./progress-panel")),l=m(n("./status-bar")),u=m(n("./status-bar/iframe-status-bar")),d=m(n("./cursor")),c=p(n("./cursor/iframe-cursor")),h=m(n("./screenshot-mark")),f=m(n("./ui-root"));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}var g=i.default.Promise,v=i.default.eventSandbox.message,y=s.default.sendRequestToFrame,_="ui|hide|request",w="ui|hide|response",E="ui|show|request",C="ui|show|response";v.on(v.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===_?(f.default.hide(),v.sendServiceMsg({cmd:w},t.source)):t.message.cmd===E&&(f.default.show(),v.sendServiceMsg({cmd:C},t.source))}),t.cursorUI=d.default,t.iframeCursorUI=c,t.selectElement=a,t.modalBackground=o,t.ProgressPanel=r.default,t.StatusBar=l.default,t.IframeStatusBar=u.default,t.get=n,t.hide=function(t){return t?y({cmd:_},w,D.top):(f.default.hide(),g.resolve())},t.show=function(t){return t?y({cmd:E},C,D.top):(f.default.show(),g.resolve())},t.showScreenshotMark=function(t){return h.default.show(t)},t.hideScreenshotMark=function(){return h.default.hide()};var x=i.default.nativeMethods,b=i.default.EVENTS.evalIframeScript;x.objectDefineProperty(D,"%testCafeUI%",{configurable:!0,value:t}),i.default.on(b,function(t){return S(x.contentWindowGetter.call(t.iframe))})},"modal-background.js":function(t,e,n){t.__esModule=!0,t.initAndShowLoadingText=function(){var e=!1,n=function(){y(),a.styleUtils.set(p,"opacity",h),a.styleUtils.set(p,"display","block"),a.styleUtils.set(m,"display","block"),e=!0};(function t(){e||(U.body?n():s.nativeMethods.setTimeout.call(D,t,0))})(),a.eventUtils.documentReady().then(function(){e||n()})},t.show=function(t){v||y(),a.styleUtils.set(p,"opacity",t?0:c),a.styleUtils.set(p,"display","block")},t.hide=function(){v&&(a.styleUtils.set(m,"display","none"),a.styleUtils.set(p,"display","none"))},t.showLoadingIcon=function(){a.styleUtils.set(g,"visibility","visible")},t.hideLoadingIcon=function(){a.styleUtils.set(g,"visibility","hidden")};var i,s=n("./deps/hammerhead"),a=n("./deps/testcafe-core"),o=n("./ui-root"),r=(i=o)&&i.__esModule?i:{default:i},l="Loading page...",u="modal-background",d="loading-text",c=.7,h=.8,f="loading-icon",p=null,m=null,g=null,v=!1;function y(){!function(){var t=r.default.element();p=U.createElement("div"),t.appendChild(p),s.shadowUI.addClass(p,u),m=U.createElement("div"),s.nativeMethods.nodeTextContentSetter.call(m,l),t.appendChild(m),s.shadowUI.addClass(m,d),g=U.createElement("div"),a.styleUtils.set(g,"visibility","hidden"),t.appendChild(g),s.shadowUI.addClass(g,f)}(),function(){var t=function(){var t=a.styleUtils.getHeight(D),e=a.styleUtils.getWidth(D);a.styleUtils.set(p,"width",e+"px"),a.styleUtils.set(p,"height",t+"px"),a.styleUtils.set(g,{left:Math.round((e-a.styleUtils.getWidth(g))/2)+"px",top:Math.round((t-a.styleUtils.getHeight(g))/2)+"px"})};t(),a.eventUtils.bind(D,"resize",t)}(),function(){var t=a.styleUtils.getHeight(D),e=a.styleUtils.getWidth(D),n=!a.styleUtils.hasDimensions(m);n&&(a.styleUtils.set(m,"visibility","hidden"),a.styleUtils.set(m,"display","block")),a.styleUtils.set(m,{left:Math.max((e-a.styleUtils.getWidth(m))/2,0)+"px",top:Math.max((t-a.styleUtils.getHeight(m))/2,0)+"px"}),n&&(a.styleUtils.set(m,"display","none"),a.styleUtils.set(m,"visibility",""))}(),v=!0}},"progress-panel":{"index.js":function(t,e,n){t.__esModule=!0;var i=a(n("../deps/hammerhead")),s=a(n("../deps/testcafe-core")),o=a(n("./progress-bar")),r=a(n("../ui-root"));function a(t){return t&&t.__esModule?t:{default:t}}var l=i.default.shadowUI,d=i.default.nativeMethods,u=s.default.eventUtils,c=s.default.styleUtils,h=function(){function a(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=U.createElement("div"),r.default.element().appendChild(this.panelDiv),this.titleDiv=U.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=U.createElement("div"),this.panelDiv.appendChild(this.contentDiv),l.addClass(this.panelDiv,"progress-panel"),l.addClass(this.titleDiv,"title"),l.addClass(this.contentDiv,"content"),a._showAtWindowCenter(this.panelDiv),this.progressBar=new o.default(this.contentDiv),this.disposePanel=function(){return a._showAtWindowCenter(t.panelDiv)}}return a._getInvisibleElementProperty=function(t,e){var n="none"===c.get(t,"display");n&&c.set(t,"display","block");var i=t[e];return n&&c.set(t,"display","none"),i},a._showAtWindowCenter=function(t){var e=a._getInvisibleElementProperty(t,"offsetHeight"),n=a._getInvisibleElementProperty(t,"offsetWidth"),i=Math.round(c.getHeight(D)/2-e/2),s=Math.round(c.getWidth(D)/2-n/2);c.set(t,{left:s+"px",top:i+"px"})},a.prototype._setCurrentProgress=function(){var t=Math.round((Date.now()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},a.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},a.prototype._stopAnimation=function(){d.clearInterval.call(D,this.animationInterval)},a.prototype._animate=function(t,e,n,i){var s=this,a=Date.now(),o=n?0:1,r=0,l=0,u=0;n&&(c.set(t,"opacity",o),c.set(t,"display","block")),this._stopAnimation(),this.animationInterval=d.setInterval.call(D,function(){r=Date.now()-a,l=Math.min(r/e,1),u=.5-Math.cos(l*Math.PI)/2,c.set(t,"opacity",o+(n?u:-u)),1===l&&(s._stopAnimation(),i&&i())},10)},a.prototype._showPanel=function(){u.bind(D,"resize",this.disposePanel),this._animate(this.panelDiv,200,!0)},a.prototype._hidePanel=function(t){var e=this;this.startTime=null,u.unbind(D,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:600,!1,function(){return c.set(e.panelDiv,"display","none")})},a.prototype.show=function(t,e){var n=this;this.startTime=Date.now(),this.maxTimeout=e,d.nodeTextContentSetter.call(this.titleDiv,t),this._setSuccess(!1),this.openingTimeout=d.setTimeout.call(D,function(){n.openingTimeout=null,n._setCurrentProgress(),n._showPanel(),n.updateInterval=d.setInterval.call(D,function(){return n._setCurrentProgress()},100)},300)},a.prototype.close=function(t){var e=this;t&&this._setSuccess(!0),this.openingTimeout&&(d.clearTimeout.call(D,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(d.clearInterval.call(D,this.updateInterval),this.updateInterval=null),t?this.startTime&&Date.now()-this.startTime<1e3?d.setTimeout.call(D,function(){d.setTimeout.call(D,function(){return e._hidePanel(!1)},200)},100):d.setTimeout.call(D,function(){return e._hidePanel(!1)},200):this._hidePanel(!0)},a}();t.default=h,e.exports=t.default},"progress-bar.js":function(t,e,n){t.__esModule=!0;var i=a(n("../deps/hammerhead")),s=a(n("../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=i.default.shadowUI,r=s.default.styleUtils,l="success",u=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.containerElement=U.createElement("div"),this.valueElement=U.createElement("div"),t.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),o.addClass(this.containerElement,"progress-bar"),o.addClass(this.valueElement,"value")}return e.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),r.set(this.valueElement,"width",t+"%")},e.prototype.setSuccess=function(t){t?o.addClass(this.containerElement,l):o.removeClass(this.containerElement,l)},e}();t.default=u,e.exports=t.default}},"screenshot-mark.js":function(t,e,n){t.__esModule=!0;var i=n("./deps/hammerhead"),s=n("../../screenshots/constants");t.default={screenshotMark:null,_createMark:function(){this.screenshotMark=U.createElement("img"),i.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=s.MARK_RIGHT_MARGIN/D.devicePixelRatio+"px",this.screenshotMark.style.width=s.MARK_LENGTH/D.devicePixelRatio+"px",this.screenshotMark.style.height=s.MARK_HEIGHT/D.devicePixelRatio+"px",this.hide(),i.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),i.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},e.exports=t.default},"select-element.js":function(t,e,n){t.__esModule=!0,t.expandOptionList=function(t){var e=t.children;if(e.length){if(x){var n=t===x;if(R(),n)return}x=t,b=U.createElement("div"),r.default.element().appendChild(b),c.addClass(b,y),B(e,b),l.addInternalEventListener(D,["click"],M),h.setTimeout.call(D,function(){g.bind(U,"mousedown",T)},0),m.set(b,{position:"absolute",fontSize:m.get(x,"fontSize"),fontFamily:m.get(x,"fontFamily"),minWidth:m.getWidth(x)+"px",left:u.getOffsetPosition(x).left+"px",height:p.getSelectVisibleChildren(t).length>C?m.getOptionHeight(t)*C:""});var i=u.getOffsetPosition(x).top,s=m.getHeight(b),a=i+m.getHeight(x)+2;if(a+s>m.getScrollTop(D)+m.getHeight(D)){var o=i-3-s;o>=m.getScrollTop(D)&&(a=o)}m.set(b,"top",a+"px")}},t.collapseOptionList=R,t.isOptionListExpanded=A,t.getEmulatedChildElement=function(t){var e="optgroup"===p.getTagName(t),n=p.getElementIndexInParent(x,t);return e?S[n]:I[n]},t.scrollOptionListByChild=function(t){var e=p.getSelectParent(t);if(e){var n=m.getSelectElementSize(e),i=m.getOptionHeight(e),s=0,a=Math.max(m.getScrollTop(e)/i,0),o=a+n-1,r=p.getChildVisibleIndex(e,t);r<a?(s=i*(a-r),m.setScrollTop(e,Math.max(m.getScrollTop(e)-s,0))):o<r&&(s=i*(r-o),m.setScrollTop(e,m.getScrollTop(e)+s))}},t.getSelectChildCenter=function(t){var e=p.getSelectParent(t);if(!e)return{x:0,y:0};var n=m.getOptionHeight(e),i=u.getElementRectangle(t);return{x:Math.round(i.left+i.width/2),y:Math.round(i.top+n/2)}},t.switchOptionsByKeys=function(t,e){var n=m.getSelectElementSize(t),i=!m.hasDimensions(c.select("."+y)[0]);if(/down|up/.test(e)||!d.isIE&&(n<=1||d.isFirefox)&&(i||d.isFirefox)&&/left|right/.test(e)){for(var s=t.querySelectorAll("option"),a=[],o=0;o<s.length;o++){var r=s[o].parentElement;s[o].disabled||"optgroup"===p.getTagName(r)&&r.disabled||a.push(s[o])}var l=v.indexOf(a,s[t.selectedIndex]),u=l+(/down|right/.test(e)?1:-1);0<=u&&u<a.length&&(t.selectedIndex=v.indexOf(s,a[u]),d.isIE||f.input(t),f.change(t))}},t.isOptionElementVisible=function(t){var e=p.getSelectParent(t);if(!e)return!0;var n=A(e),i=m.getSelectElementSize(e);return n||1<i};var i=a(n("./deps/hammerhead")),s=a(n("./deps/testcafe-core")),r=a(n("./ui-root"));function a(t){return t&&t.__esModule?t:{default:t}}var c=i.default.shadowUI,d=i.default.utils.browser,o=i.default.utils.featureDetection,h=i.default.nativeMethods,f=i.default.eventSandbox.eventSimulator,l=i.default.eventSandbox.listeners,u=s.default.positionUtils,p=s.default.domUtils,m=s.default.styleUtils,g=s.default.eventUtils,v=s.default.arrayUtils,y="tcOptionList",_="tcOptionGroup",w="tcOption",E="disabled",C=d.isIE?30:20,x=null,b=null,S=[],I=[];function T(t){(t.target||t.srcElement)===x||p.containsElement(x,t.target)||p.containsElement(b,t.target)||R()}function M(t,e,n){var i=v.indexOf(I,t.target);if(!(i<0)){n();var s=-1<t.target.className.indexOf(E);s&&d.isWebKit||function(t,e){var n=x.selectedIndex,i=x.getElementsByTagName("option")[t],s=!e&&t!==n;s&&!d.isIE&&(x.selectedIndex=t),d.isFirefox||d.isIE||!s||(f.input(x),f.change(x)),(d.isFirefox||d.isIE)&&f.mousedown(d.isFirefox?i:x),o.isTouchDevice||f.mouseup(d.isFirefox?i:x),(d.isFirefox||d.isIE)&&s&&(d.isIE&&(x.selectedIndex=t),d.isIE||f.input(x),f.change(x)),o.isTouchDevice||f.click(d.isFirefox||d.isIE?i:x),e||R()}(i,s)}}function B(t,e){for(var n,i,s,a,o,r,l,u=p.getChildrenLength(t),d=0;d<u;d++)p.isOptionElement(t[d])?(a=t[d],o=e,r=U.createElement("div"),l=a.disabled||"optgroup"===p.getTagName(a.parentElement)&&a.parentElement.disabled,h.nodeTextContentSetter.call(r,a.text),o.appendChild(r),c.addClass(r,w),l&&(c.addClass(r,E),m.set(r,"color",m.get(a,"color"))),I.push(r)):"optgroup"===p.getTagName(t[d])&&(n=t[d],i=e,s=U.createElement("div"),h.nodeTextContentSetter.call(s,n.label||" "),i.appendChild(s),c.addClass(s,_),s.disabled&&(c.addClass(s,E),m.set(s,"color",m.get(n,"color"))),B(n.children,s),S.push(s))}function R(){p.remove(b),g.unbind(U,"mousedown",T),x=b=null,I=[],S=[]}function A(t){return t?t===x:!!x}},"status-bar":{"iframe-status-bar.js":function(t,e,n){t.__esModule=!0;var i=r(n("./../deps/hammerhead")),s=r(n("./../deps/testcafe-core")),a=r(n("./messages")),o=r(n("./index"));function r(t){return t&&t.__esModule?t:{default:t}}var l=s.default.sendRequestToFrame,u=i.default.eventSandbox.message,d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.showWaitingElementStatus=function(t){u.sendServiceMsg({cmd:a.default.startWaitingElement,timeout:t},D.top)},e.prototype.hideWaitingElementStatus=function(t){var e={cmd:a.default.endWaitingElementRequest,waitingSuccess:t};return l(e,a.default.endWaitingElementResponse,D.top)},e.prototype.showWaitingAssertionRetriesStatus=function(t){u.sendServiceMsg({cmd:a.default.startWaitingAssertionRetries,timeout:t},D.top)},e.prototype.hideWaitingAssertionRetriesStatus=function(t){var e={cmd:a.default.endWaitingAssertionRetriesRequest,waitingSuccess:t};return l(e,a.default.endWaitingAssertionRetriesResponse,D.top)},e}(o.default);t.default=d,e.exports=t.default},"index.js":function(t,e,n){t.__esModule=!0;var i=a(n("./../deps/hammerhead")),s=a(n("./../deps/testcafe-core")),o=a(n("./progress-bar")),r=a(n("../ui-root")),l=a(n("./messages"));function a(t){return t&&t.__esModule?t:{default:t}}var u=i.default.Promise,d=i.default.shadowUI,c=i.default.nativeMethods,h=i.default.eventSandbox.message,f=i.default.utils.browser,p=i.default.utils.featureDetection,m=i.default.eventSandbox.listeners,g=s.default.styleUtils,v=s.default.eventUtils,y=s.default.domUtils,_=s.default.serviceUtils,w=s.default.arrayUtils,E="info-container",C="waiting-element-failed",x="waiting-element-success",b={all:{name:"show-all-elements",maxSize:1/0},hideFixture:{name:"hide-fixture",maxSize:940,className:"icon-status-view"},hideStatus:{name:"hide-status-debugging",maxSize:740,className:"icon-unlock-buttons-view"},hideUnlockArea:{name:"hide-unlock-area",maxSize:460,className:"icon-buttons-view"},onlyButtons:{name:"show-buttons-only",maxSize:330,className:"only-buttons-view"},onlyIconAndFixture:{name:"show-icon-fixture-only",maxSize:1/0,className:"only-icon-fixture-view"},onlyIcon:{name:"show-icon-only",maxSize:380,className:"only-icon-view"}},S=[b.onlyIcon,b.onlyIconAndFixture],I=[b.onlyIcon,b.hideFixture,b.all],T=[b.onlyButtons,b.hideUnlockArea,b.hideStatus,b.hideFixture,b.all],M=function(s){function a(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this));return i.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",i.userAgent=t,i.fixtureName=e,i.testName=n,i.statusBar=null,i.container=null,i.infoContainer=null,i.icon=null,i.fixtureContainer=null,i.resumeButton=null,i.finishButton=null,i.nextButton=null,i.statusDiv=null,i.buttons=null,i.progressBar=null,i.animationInterval=null,i.showingTimeout=null,i.windowHeight=U.documentElement?g.getHeight(D):D.innerHeight,i.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},i.currentView=null,i._createBeforeReady(),i._initChildListening(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,s),a.prototype._createFixtureArea=function(){this.infoContainer=U.createElement("div"),d.addClass(this.infoContainer,E),d.addClass(this.infoContainer,E),this.container.appendChild(this.infoContainer),this.icon=U.createElement("div"),d.addClass(this.icon,"icon"),this.infoContainer.appendChild(this.icon),this.fixtureContainer=U.createElement("div"),d.addClass(this.fixtureContainer,"fixture-container"),this.infoContainer.appendChild(this.fixtureContainer);var t=U.createElement("div");c.nodeTextContentSetter.call(t,this.fixtureName+" - "+this.testName),d.addClass(t,"fixture"),this.fixtureContainer.appendChild(t);var e=U.createElement("div");c.nodeTextContentSetter.call(e,this.userAgent),d.addClass(e,"user-agent"),this.fixtureContainer.appendChild(e)},a.prototype._createUnlockPageArea=function(t){var e=this,n=U.createElement("div"),i=U.createElement("div"),s=U.createElement("div"),a=U.createElement("div"),o=U.createElement("span");return c.nodeTextContentSetter.call(o,"Unlock Page"),d.addClass(n,"unlock-page-area"),d.addClass(i,"unlock-page-container"),d.addClass(i,"locked"),d.addClass(s,"unlock-icon"),d.addClass(a,"icon-separator"),t.appendChild(n),n.appendChild(i),i.appendChild(s),i.appendChild(o),i.appendChild(a),this._bindClickOnce([i],function(){d.removeClass(i,"locked"),d.addClass(i,"unlocked"),c.nodeTextContentSetter.call(o,"Page unlocked"),e.emit(e.UNLOCK_PAGE_BTN_CLICK,{})}),n.style.display="none",n},a.prototype._createStatusArea=function(){var t=U.createElement("div");d.addClass(t,"status-container"),this.container.appendChild(t),this.statusDiv=U.createElement("div"),c.nodeTextContentSetter.call(this.statusDiv,"Loading Web Page..."),d.addClass(this.statusDiv,"status"),f.isMacPlatform&&(this.statusDiv.style.marginTop="11px"),t.appendChild(this.statusDiv),this.unlockPageArea=this._createUnlockPageArea(t),this.buttons=U.createElement("div"),d.addClass(this.buttons,"buttons"),t.appendChild(this.buttons),this.resumeButton=this._createButton("Resume","resume"),this.nextButton=this._createButton("Next Action","step"),this.finishButton=this._createButton("Finish","resume"),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.nextButton),this.buttons.style.display="none"},a.prototype._createButton=function(t,e){var n=U.createElement("div"),i=U.createElement("div"),s=U.createElement("span");return c.nodeTextContentSetter.call(s,t),d.addClass(n,"button"),d.addClass(n,e),d.addClass(i,"button-icon"),f.isSafari&&(s.style.position="relative",s.style.top="1px"),n.appendChild(i),n.appendChild(s),n},a.prototype._create=function(){this.statusBar=U.createElement("div"),this.container=U.createElement("div"),d.addClass(this.statusBar,"status-bar"),d.addClass(this.container,"container"),this.statusBar.appendChild(this.container),this._createFixtureArea(),this._createStatusArea(),this.progressBar=new o.default(this.statusBar),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),r.default.element().appendChild(this.statusBar),this._recalculateSizes(),this._bindHandlers(),this.state.created=!0},a.prototype._createBeforeReady=function(){var t=this;this.state.created||D!==D.top||(U.body?this._create():c.setTimeout.call(D,function(){return t._createBeforeReady()},0))},a.prototype._switchView=function(t){this.currentView&&this.currentView.name===t.name||(this.currentView&&this.currentView.className&&d.removeClass(this.statusBar,this.currentView.className),t.className&&d.addClass(this.statusBar,t.className),this.currentView=t)},a.prototype._getActualViewSequence=function(){return this.state.debugging?T:this.state.waiting?I:S},a.prototype._calculateActualView=function(n){return this._getActualViewSequence().reduce(function(t,e){return t.maxSize>=n?t:e})},a.prototype._setFixtureContainerWidth=function(){if("none"!==g.get(this.fixtureContainer,"display")){var t=g.getWidth(this.infoContainer),e=g.getWidth(this.icon),n=g.getElementMargin(this.icon),i=t-e-n.left-n.right-1;g.set(this.fixtureContainer,"width",i+"px")}},a.prototype._setStatusDivLeftMargin=function(){if(this.statusDiv.parentNode&&"none"!==g.get(this.statusDiv.parentNode,"display")){var t="none"===g.get(this.statusDiv,"display"),e=g.getWidth(this.infoContainer),n=g.getWidth(this.container)/2-(t?0:g.getWidth(this.statusDiv))/2-e;this.state.debugging&&(n-=g.getWidth(this.buttons)/2,n-=g.getWidth(this.unlockPageArea)/2);var i=Math.max(Math.round(n),0)+"px";g.set(this.statusDiv,"marginLeft",t?0:i),g.set(this.statusDiv.parentNode,"marginLeft",t?i:0)}},a.prototype._recalculateSizes=function(){var t=g.getWidth(D);this.windowHeight=g.getHeight(D),g.set(this.statusBar,"width",t+"px"),this._switchView(this._calculateActualView(t)),this._setFixtureContainerWidth(),this._setStatusDivLeftMargin()},a.prototype._animate=function(t){var e=this,n=Date.now(),i=parseInt(g.get(this.statusBar,"opacity"),10)||0,s=0,a=0,o=0;this._stopAnimation(),t&&(g.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=c.setInterval.call(D,function(){s=Date.now()-n,a=Math.min(s/500,1),o=.5-Math.cos(a*Math.PI)/2,g.set(e.statusBar,"opacity",i+(t?o:-o)),1===a&&(e._stopAnimation(),t||(g.set(e.statusBar,"visibility","hidden"),e.state.hidden=!0),e.state.showing=!1,e.state.hiding=!1)},10)},a.prototype._stopAnimation=function(){this.animationInterval&&(c.clearInterval.call(D,this.animationInterval),this.animationInterval=null)},a.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},a.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},a.prototype._bindHandlers=function(){var e=this;m.initElementListening(D,["resize"]),m.addInternalEventListener(D,["resize"],function(){return e._recalculateSizes()});var n=g.getHeight(this.statusBar);m.addFirstInternalHandler(D,["mousemove","mouseout"],function(t){"mouseout"!==t.type||t.relatedTarget?"mousemove"===t.type&&(t.clientY>e.windowHeight-n?e._fadeOut(t):e.state.hidden&&e._fadeIn(t)):e._fadeIn(t)})},a.prototype._bindClickOnce=function(n,i){var s=this,a=p.isTouchDevice?"touchstart":"mousedown";m.addInternalEventListener(D,[a],function t(e){w.find(n,function(t){return y.containsElement(t,e.target)})?(v.preventDefault(e),m.removeInternalEventListener(D,[a],t),i(e)):y.containsElement(s.statusBar,e.target)&&v.preventDefault(e)})},a.prototype._initChildListening=function(){var n=this;h.on(h.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;e.cmd===l.default.startWaitingElement?n.showWaitingElementStatus(e.timeout):e.cmd===l.default.endWaitingElementRequest?n.hideWaitingElementStatus(e.waitingSuccess).then(function(){return h.sendServiceMsg({cmd:l.default.endWaitingElementResponse},t.source)}):e.cmd===l.default.startWaitingAssertionRetries?n.showWaitingAssertionRetriesStatus(e.timeout):e.cmd===l.default.endWaitingAssertionRetriesRequest&&n.hideWaitingAssertionRetriesStatus(e.waitingSuccess).then(function(){return h.sendServiceMsg({cmd:l.default.endWaitingAssertionRetriesResponse},t.source)})})},a.prototype._resetState=function(){this.state.debugging=!1,this.buttons.style.display="none",this.unlockPageArea.style.display="none",c.nodeTextContentSetter.call(this.statusDiv,""),this.progressBar.hide(),this._recalculateSizes()},a.prototype._showWaitingStatus=function(){var t=this.state.assertionRetries?"Waiting for assertion execution...":"Waiting for element to appear...";c.nodeTextContentSetter.call(this.statusDiv,t),this._setStatusDivLeftMargin(),this._recalculateSizes(),this.progressBar.show()},a.prototype._hideWaitingStatus=function(e){var n=this;return new u(function(t){c.setTimeout.call(D,function(){n.state.waiting||n.state.debugging||(d.removeClass(n.statusBar,x),d.removeClass(n.statusBar,C),n.progressBar.determinateIndicator.reset(),n._resetState(),n._recalculateSizes()),t()},e?0:500)})},a.prototype._showDebuggingStatus=function(t){var i=this;return new u(function(n){i.state.debugging=!0,t?(i.buttons.removeChild(i.nextButton),i.buttons.removeChild(i.resumeButton),i.buttons.appendChild(i.finishButton),c.nodeTextContentSetter.call(i.statusDiv,"Test failed"),d.removeClass(i.statusBar,x),d.addClass(i.statusBar,C)):c.nodeTextContentSetter.call(i.statusDiv,"Debugging test..."),i.buttons.style.display="",i.unlockPageArea.style.display="",i._recalculateSizes(),i._bindClickOnce([i.resumeButton,i.nextButton,i.finishButton],function(t){var e=y.containsElement(i.nextButton,t.target);i._resetState(),n(e)})})},a.prototype._setWaitingStatus=function(t,e){var n=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,e),this.showingTimeout=c.setTimeout.call(D,function(){n.showingTimeout=null,n._showWaitingStatus()},300)},a.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?d.addClass(this.statusBar,x):d.addClass(this.statusBar,C);var e=this.showingTimeout&&t;return this.showingTimeout&&(c.clearTimeout.call(D,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(e)},a.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},a.prototype.showDebuggingStatus=function(t){return this._stopAnimation(),g.set(this.statusBar,"opacity",1),g.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},a.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},a.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?u.resolve():this._resetWaitingStatus(t)},a.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},a.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},a}(_.EventEmitter);t.default=M,e.exports=t.default},"messages.js":function(t,e,n){t.__esModule=!0,t.default={startWaitingElement:"start-waiting-element",endWaitingElementRequest:"end-waiting-element-request",endWaitingElementResponse:"end-waiting-element-response",startWaitingAssertionRetries:"start-waiting-assertion-retries",endWaitingAssertionRetriesRequest:"end-waiting-assertion-retries-request",endWaitingAssertionRetriesResponse:"end-waiting-assertion-retries-response"},e.exports=t.default},"progress-bar":{"determinate-indicator.js":function(t,e,n){t.__esModule=!0;var i=a(n("../../deps/hammerhead")),s=a(n("../../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=i.default.shadowUI,r=i.default.nativeMethods,l=s.default.styleUtils,u="determinate",d=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.progressBar=t,this.firstValueElement=e,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}return n.prototype._setCurrentProgress=function(){var t=(Date.now()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),n=l.getWidth(this.progressBar),i=Math.round(n*e);l.set(this.firstValueElement,"width",i+"px")},n.prototype.start=function(t,e){var n=this;o.addClass(this.progressBar,u),this.maxTimeout=t,this.startTime=e||Date.now(),this._setCurrentProgress(),this.animationInterval=r.setInterval.call(D,function(){return n._setCurrentProgress()},10)},n.prototype.stop=function(){this.animationInterval&&(r.clearInterval.call(D,this.animationInterval),this.animationInterval=null)},n.prototype.reset=function(){l.set(this.firstValueElement,"width",0),o.removeClass(this.progressBar,u)},n}();t.default=d,e.exports=t.default},"indeterminate-indicator.js":function(t,e,n){t.__esModule=!0;var i=a(n("../../deps/hammerhead")),s=a(n("../../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=i.default.shadowUI,r=i.default.nativeMethods,u=s.default.styleUtils,d=s.default.positionUtils,l={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},c={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},h=0,f=.6,p=1,m="indeterminate",g=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.progressBar=t,this.firstValue=e,this.secondValue=n,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}return i._updateValueAnimation=function(t,e,n){var i=n.time,s=n.points,a=n.positionByCompletePercent,o=function(t,e){var n=t<f,i=n?h:f,s=n?f:p,a=e[i],o=e[s],r={x:i,y:a.left},l={x:s,y:o.left},u=d.getLineYByXCoord(r,l,t);return r={x:i,y:a.right},l={x:s,y:o.right},{left:u,right:d.getLineYByXCoord(r,l,t)}}(function(t,e,n){return 3*Math.pow(1-t,2)*t*e+3*(1-t)*t*t*n+t*t*t}((Date.now()-t)/i,s[0],s[1]),a),r=o.left,l=o.right;u.set(e,"left",Math.round(r)+"%"),u.set(e,"right",Math.round(l)+"%")},i.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(r.clearInterval.call(D,this.animationInterval),this.animationInterval=null),u.set(this.firstValue,"left","-35%"),u.set(this.firstValue,"right","100%")},i.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(r.clearInterval.call(D,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),u.set(this.secondValue,"left","-200%"),u.set(this.secondValue,"right","100%")},i.prototype._startFirstValueAnimation=function(){var t=this;this._clearFirstValueAnimation();var e=Date.now();this.animationInterval=r.setInterval.call(D,function(){i._updateValueAnimation(e,t.firstValue,l)},10)},i.prototype._startSecondValueAnimation=function(){var t=this;this._clearSecondValueAnimation();var e=Date.now();this.secondValueAnimationInterval=r.setInterval.call(D,function(){i._updateValueAnimation(e,t.secondValue,c)},10)},i.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=r.setTimeout.call(D,function(){return t._startSecondValueAnimation()},1e3),this.restartAnimationTimeout=r.setTimeout.call(D,function(){return t._startAnimation()},1950)},i.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(r.clearInterval.call(D,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(r.clearInterval.call(D,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},i.prototype.start=function(){o.addClass(this.progressBar,m),this._startAnimation()},i.prototype.stop=function(){o.removeClass(this.progressBar,m),this._stopAnimation()},i}();t.default=g,e.exports=t.default},"index.js":function(t,e,n){t.__esModule=!0;var i=r(n("../../deps/hammerhead")),s=r(n("../../deps/testcafe-core")),a=r(n("./determinate-indicator")),o=r(n("./indeterminate-indicator"));function r(t){return t&&t.__esModule?t:{default:t}}var l=i.default.shadowUI,u=s.default.styleUtils,d=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(t),this.determinateIndicator=new a.default(this.progressBar,this.firstValueElement),this.indeterminateIndicator=new o.default(this.progressBar,this.firstValueElement,this.secondValueElement)}return e.prototype._create=function(t){this.progressBar=U.createElement("div"),l.addClass(this.progressBar,"progress-bar"),t.appendChild(this.progressBar);var e=U.createElement("div");l.addClass(e,"value-container"),this.progressBar.appendChild(e),this.firstValueElement=U.createElement("div"),l.addClass(this.firstValueElement,"value"),e.appendChild(this.firstValueElement),this.secondValueElement=U.createElement("div"),l.addClass(this.secondValueElement,"value"),e.appendChild(this.secondValueElement)},e.prototype.show=function(){u.set(this.progressBar,"visibility","visible")},e.prototype.hide=function(){u.set(this.progressBar,"visibility","hidden")},e}();t.default=d,e.exports=t.default}}},"ui-root.js":function(t,e,n){t.__esModule=!0;var i=n("./deps/hammerhead");t.default={uiRoot:null,element:function(){return this.uiRoot||(this.uiRoot=U.createElement("div"),i.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=i.shadowUI.getRoot();t.parentNode.removeChild(t)}},e.exports=t.default}}},screenshots:{"constants.js":function(t,e,n){t.__esModule=!0,t.MARK_BYTES_PER_PIXEL=4,t.MARK_LENGTH=32,t.MARK_HEIGHT=10,t.MARK_RIGHT_MARGIN=10}}}}})("testcafe-release/src/client/ui/index")}(window);